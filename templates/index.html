<!DOCTYPE html>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Countdown to 2026</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <script src="{{ url_for('static', filename='fireworks.js') }}"></script>
</head>
<body onload="initCountdown(); setThemeByTime(); launchFireworks();">
  <div class="overlay">
    <h1 class="title">Countdown to 2026</h1>
    <div id="countdown" class="countdown"></div>
    <p class="visits">Visitors: {{ visits }}</p>
    <p class="footer">nam2010© 2025 All rights reserved.</p>
  </div>
  <canvas id="fireworks-canvas"></canvas>
  <audio id="bg-music" autoplay loop>
  <source src="{{ url_for('static', filename='audio/ten_file_nhac.mp3') }}" type="audio/mpeg">
  Trình duyệt của bạn không hỗ trợ phần tử âm thanh.
</audio>
</body>
<script>
  function initCountdown() {
    const target = new Date("January 1, 2026 00:00:00").getTime();
    setInterval(() => {
      const now = new Date().getTime();
      const gap = target - now;

      const d = Math.floor(gap / (1000 * 60 * 60 * 24));
      const h = Math.floor((gap % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const m = Math.floor((gap % (1000 * 60 * 60)) / (1000 * 60));
      const s = Math.floor((gap % (1000 * 60)) / 1000);

      document.getElementById("countdown").innerHTML = `${d}d ${h}h ${m}m ${s}s`;
    }, 1000);
  }

  function setThemeByTime() {
    const hour = new Date().getHours();
    const isDark = hour >= 18 || hour < 6;
    document.body.classList.add(isDark ? "dark-mode" : "light-mode");
    document.body.classList.remove(isDark ? "light-mode" : "dark-mode");
  }
</script>
</html>
